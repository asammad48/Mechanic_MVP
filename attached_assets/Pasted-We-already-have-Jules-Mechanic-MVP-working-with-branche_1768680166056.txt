We already have Jules Mechanic MVP working with: branches, visits/job cards, labor items, part items, payments, notes, analytics, and role-based UI.

Now implement the following REQUIRED additions end-to-end (Database + Backend + Frontend), following the SAME existing project structure and coding style. Do NOT refactor unrelated code. Do NOT change folder structure. Keep /backend and /frontend separate.

========================
NEW BUSINESS REQUIREMENTS (VISIT)
========================
A) Labor must support PER HOUR pricing
- Each labor item must store:
  - title (required)
  - hours (required, decimal allowed like 1.5)
  - ratePerHour (required)
  - subtotal (computed server-side = hours * ratePerHour)

B) Spare parts used in the visit
- Each part item must store:
  - name (required)
  - qty (required)
  - unitPrice (required)
  - subtotal (computed server-side = qty * unitPrice)

C) Outside Workshop Work (outsourced / third-party)
Sometimes work is done outside our workshop (e.g., denting/painting, AC, electrical).
Create a separate list of outside-work items for a visit:
- vendorName (required)
- workDescription (required)
- cost (required)
- notes (optional)
Subtotal computed server-side (sum of outside work costs)

D) Mandatory fields in EACH visit
When creating a new visit, the following must be required and validated in backend:
- vehicle registration number
- customer phone OR customer name (at least one required)
- complaint / issue description
- mileage
- branch scope (already exists)
If missing → return clear validation error.

========================
DATABASE (PRISMA / POSTGRES)
========================
1) Visit updates
- Ensure Visit.mileage exists and is REQUIRED
- Ensure Visit.complaint is REQUIRED

2) LaborItem
- title
- hours (Decimal / Float)
- ratePerHour (Decimal)
- subtotal (Decimal, computed server-side)

3) PartItem
- name
- qty (Int)
- unitPrice (Decimal)
- subtotal (Decimal, computed server-side)

4) NEW: OutsideWorkItem model
- id
- visitId (FK)
- vendorName
- workDescription
- cost (Decimal)
- notes (optional)
- createdAt
Relation:
Visit → OutsideWorkItems (one-to-many)

5) Visit totals (server-side source of truth)
- subtotalLabor
- subtotalParts
- subtotalOutside
- discountAmount
- taxAmount
- grandTotal
- paidAmount
- dueAmount

Totals MUST update whenever:
- labor items change
- part items change
- outside work items change
- payments change

Run migrations and regenerate Prisma client.

========================
BACKEND (NODE / EXPRESS)
========================
1) Validation
- Update Zod schemas:
  - POST /visits → enforce mandatory fields
  - POST labor item → hours + ratePerHour required
  - POST part item → qty + unitPrice required
  - POST outside-work item → vendorName, workDescription, cost required

2) Outside work endpoints (NEW)
- POST /visits/:id/outside-work-items
- DELETE /outside-work-items/:id
- GET /visits/:id → must include outside-work items

3) Server-side calculations (CRITICAL)
- subtotalLabor = sum(labor.subtotal)
- subtotalParts = sum(parts.subtotal)
- subtotalOutside = sum(outside.cost)
- grandTotal = subtotalLabor + subtotalParts + subtotalOutside - discount + tax
- paidAmount = sum(non-voided payments)
- dueAmount = max(grandTotal - paidAmount, 0)

Frontend must NOT calculate totals.

4) Permissions
- Follow existing role rules.
- Mechanic: can add labor + notes.
- Manager/Admin: can add parts and outside work.
- Keep logic simple and consistent with existing RBAC.

========================
FRONTEND (REACT)
========================
Update Visit Details Panel:

1) Labor section
- Form: title, hours, rate/hour
- List labor items with subtotal

2) Parts section
- Form: name, qty, unit price
- List parts with subtotal

3) Outside Workshop Work section (NEW)
- Form: vendorName, workDescription, cost, notes
- List outsourced items
- Show subtotalOutside

4) Totals panel
- Show:
  - subtotalLabor
  - subtotalParts
  - subtotalOutside
  - grandTotal
  - paidAmount
  - dueAmount
- Display values strictly from backend responses

5) New Car Entry modal
- Enforce mandatory fields visually
- Show backend validation errors clearly

========================
TESTING (IMPORTANT)
========================
Do NOT write automated or integration tests.

Only do manual / sanity verification:
- Backend starts without errors
- Visit can be created with required fields
- Labor, parts, and outside work can be added
- Totals update correctly after each action
- No runtime or console errors

========================
DELIVERABLES
========================
- Updated Prisma schema + migrations
- Updated backend endpoints + validation + calculations
- Updated frontend UI for labor, parts, outside work, and totals
- No automated test code
- Same structure and style as existing code
